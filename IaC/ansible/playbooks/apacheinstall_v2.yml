
---
  - name: Install default Apache web server
    hosts: all
    become: yes

    tasks:
     - name: Check and Print Linux version
       debug:
         var: ansible_os_family

     - block: # Debian block
        - name: Update apt
          apt : update_cache=yes

        - name: Install Apache for Debian
          apt : name=apache2 state=latest

        - name   : Start Apache and Enable it on the every boot Debian
          service: name=apache2 state=started enabled=yes

       when: ansible_os_family == "Debian"

     - block: # RedHat block
        - name: Update yum
          yum : update_cache=yes

        - name: Install Apache for RedHat
          yum : name=httpd state=latest

        - name   : Start Apache and Enable it on the every boot for Redhat
          service: name=httpd state=started enabled=yes

       when: ansible_os_family == "RedHat"
...
